<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/index.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<h:head>
		<h:outputScript library="primefaces" name="jquery/jquery.js" />
		<h:outputScript library="primefaces" name="primefaces.js" />
		<h:outputScript library="primefaces" name="jquery.js" />
		<h:outputScript library="primefaces" name="jquery-plugins.js" />
		<link type="text/css" rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/primeflex@3.3.1/primeflex.min.css" />
		<link rel="stylesheet" type="text/css" href="resources/css/index.css" />

	</h:head>

	<ui:define name="contenidoPrincipal">

		<div class="cont" style="display: grid; justify-content: center;">
			<div class="headerRegistro">
				<div class="textoHeader">
					<h1 class="mt-0" style="text-align-last: center;">Alta de
						Evento</h1>
				</div>
			</div>
			<div class="box separador">
				<div class="surface-card p-4 shadow-2 border-round w-full">
					<div class="card " id="coso">
						<h:form>
							<p:growl id="messages" life="3000" closable="true"
								showDetail="true"/>
							<p:fieldset id="grid" legend="Datos Personales"
								class="fildsetprueba">
								<div class="grid ui-fluid">
									<div class="col-12 md:col-4">
										<h5>Titulo *</h5>

										<p:inputText id="titulo"
											value="#{gestionEventos.eventoSeleccionado.titulo}"
											required="true" requiredMessage="Debe ingresar el Titulo"
											maxlength="50"
											validatorMessage="No puede contener solo espacios vacios">
											<f:validateRegex pattern="^(?!\s*$).+"></f:validateRegex>
										</p:inputText>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="titulo" /></small>

									</div>

									<div class="col-12 md:col-4">
										<h5>Localizacion *</h5>
										<p:inputText id="localizacion"
											required="true"
											requiredMessage="Debe ingresar una Localización"
											value="#{gestionEventos.eventoSeleccionado.localizacion}"
											validatorMessage="No puede contener solo espacios vacios"
											maxlength="50">
											<f:validateRegex pattern="^(|\s*.*\S.*)$"></f:validateRegex>
										</p:inputText>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="localizacion" /></small>
									</div>


									<div class="field col-12 md:col-4">
										<h5>Creditos</h5>
										<p:inputText id="creditos"
											value="#{gestionEventos.eventoSeleccionado.creditos}"
											validatorMessage="No puede contener solo espacios vacios">
											<f:validateRegex pattern="^(|\s*.*\S.*)$"></f:validateRegex>

										</p:inputText>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="creditos" /></small>

									</div>
								</div>
								<div class="grid ui-fluid">
									<div class="col-12 md:col-4">
										<h5>Semestre*</h5>
										<p:inputText id="semestre"
											value="#{gestionEventos.eventoSeleccionado.semestre}"
											validatorMessage="No puede contener solo espacios vacios">
											<f:validateRegex pattern="^(?!\s*$).+"></f:validateRegex>

										</p:inputText>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="semestre" /></small>
									</div>

									<div class="col-12 md:col-4">
										<h5>Tipo actividad *</h5>
										<p:selectOneMenu id="groupActividad"
											value="#{gestionEventos.eventoSeleccionado.tipoActividad}"
											validatorMessage="Debe Seleccionar una opcion"
											converter="omnifaces.SelectItemsConverter">
											<f:selectItem itemLabel="Selecciona uno" itemValue="" />
											<c:forEach var="ta"
												items="#{gestionEventos.tiposActividades}">
												<f:selectItem itemLabel="#{ta.nombre}" itemValue="#{ta}" />
											</c:forEach>

											<f:validateRequired></f:validateRequired>
										</p:selectOneMenu>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="groupActividad" /></small>


									</div>
									<div class="field col-12 md:col-4">
										<h5>Modalidad *</h5>
										<p:selectOneMenu id="groupModalidad"
											value="#{gestionEventos.eventoSeleccionado.modalidad}"
											validatorMessage="Debe Seleccionar una opcion"
											converter="omnifaces.SelectItemsConverter">
											<f:selectItem itemLabel="Selecciona uno" itemValue="" />
											<c:forEach var="md"
												items="#{gestionEventos.modalidadesEvento}">
												<f:selectItem itemLabel="#{md.nombre}" itemValue="#{md}" />
											</c:forEach>

											<f:validateRequired></f:validateRequired>
										</p:selectOneMenu>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="groupModalidad" /></small>
									</div>
									<div class="field col-12 md:col-4">
										<h5>ITR *</h5>
										<p:selectOneMenu id="groupITR"
											value="#{gestionEventos.eventoSeleccionado.itr}"
											validatorMessage="Debe Seleccionar una opcion"
											converter="omnifaces.SelectItemsConverter">
											<f:selectItem itemLabel="Selecciona uno" itemValue="" />
											<c:forEach var="itr" items="#{gestionPersona.itrs}">
												<f:selectItem itemLabel="#{itr.nombre}" itemValue="#{itr}" />
											</c:forEach>

											<f:validateRequired></f:validateRequired>
										</p:selectOneMenu>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="groupITR" /></small>

									</div>
									<div class="field col-12 md:col-4">
										<h5>Fecha de Inicio *</h5>
										<p:datePicker id="fechaInicio"
											value="#{gestionEventos.fechaInicioEvento}"
											monthNavigator="true"
											pattern="yyyy-dd-MM HH:mm" yearNavigator="true"
											yearRange="2011:2100"
											required="true" showTime="true"
											requiredMessage="Debe ingresar una fecha de inicio"
											validatorMessage="Formato incorrecto de la Fecha"
											converter="timestampConverter" timeZone="America/Montevideo">
										</p:datePicker>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="fechaInicio" /></small>
									</div>

									<div class="field col-12 md:col-4">
										<h5>Fecha de Fin *</h5>
										<p:datePicker id="fechaFin"
											value="#{gestionEventos.eventoSeleccionado.fechaFin}"
											monthNavigator="true"
											validator="#{validatorEvento.validate}"
											pattern="yyyy-dd-MM HH:mm" yearNavigator="true"
											yearRange="2011:2100" required="true" showTime="true"
											requiredMessage="Debe ingresar una fecha de Fin"
											converter="timestampConverter" timeZone="America/Montevideo">
										</p:datePicker>
										<small class="block ui-state-error"><h:message
												style="color:red;" for="fechaFin" /></small>
									</div>
									<div class="field col-12 md:col-4">

										<p:commandButton value="Tutores asignados"
											action="#{gestionEventos.asignarTutores}" update="grid messages" immediate="true">
										</p:commandButton>
									</div>



								</div>




							</p:fieldset>






							<div>
								<div class="flex card-container">
									<div
										class="flex-none flex align-items-center justify-content-center">

									</div>

									<div
										class="flex-grow-1 flex align-items-center justify-content-center "></div>
									<div
										class="flex-none flex align-items-center justify-content-center">
										<p:commandButton value="Confirmar"
											action="#{gestionEventos.altaEvento}" update="grid messages">
											<p:confirm header="Confirmación" message="¿Desea crear este evento?" icon="pi pi-exclamation-triangle"/> 
										</p:commandButton>
									</div>


								</div>
							</div>


						<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
								<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat" />					          
					            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" />				      
						 </p:confirmDialog>


						</h:form>

					</div>
				</div>
			</div>
		</div>
	</ui:define>

</ui:composition>
